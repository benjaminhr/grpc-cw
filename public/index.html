<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ùêå</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
    />
  </head>
  <body>
    <div class="container" style="margin-top: 18rem">
      <h2 class="title">Multiply Matrices</h2>
      <hr />
      <form
        action="/multiply"
        method="post"
        enctype="multipart/form-data"
        id="upload"
      >
        <div class="row">
          <div class="six columns">
            <label for="A">Matrix A:</label>
            <input type="file" name="A" id="A" />
          </div>
          <div class="six columns">
            <label for="B">Matrix B:</label>
            <input type="file" name="B" id="A" />
          </div>
        </div>

        <button
          type="submit"
          class="button-primary u-full-width"
          style="margin-top: 20px"
        >
          Multiply
        </button>
      </form>

      <table class="matrix"></table>
    </div>
  </body>

  <script>
    document.querySelector("#upload").addEventListener("submit", (event) => {
      event.preventDefault();
      fetch(event.target.action, {
        method: "POST",
        headers: {},
        body: new FormData(event.target),
      })
        .then((resp) => {
          return resp.json();
        })
        .then((matrix) => {
          const table = document.querySelector(".matrix");

          let result = "";
          for (let i = 0; i < matrix.length; i++) {
            result += "<tr>";
            for (let j = 0; j < matrix[i].length; j++) {
              result += "<td>" + matrix[i][j] + "</td>";
            }
            result += "</tr>";
          }

          table.innerHTML = result;
        })
        .catch((error) => {
          console.log("Error uploading: ", error);
        });
    });
  </script>
</html>
